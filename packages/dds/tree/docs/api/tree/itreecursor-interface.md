{
"title": "ITreeCursor Interface",
"summary": "A stateful low-level interface for reading tree data.",
"kind": "Interface",
"members": {
"PropertySignature": {
"chunkLength": "/docs/apis/tree/itreecursor-interface#chunklength-propertysignature",
"chunkStart": "/docs/apis/tree/itreecursor-interface#chunkstart-propertysignature",
"fieldIndex": "/docs/apis/tree/itreecursor-interface#fieldindex-propertysignature",
"mode": "/docs/apis/tree/itreecursor-interface#mode-propertysignature",
"pending": "/docs/apis/tree/itreecursor-interface#pending-propertysignature",
"type": "/docs/apis/tree/itreecursor-interface#type-propertysignature",
"value": "/docs/apis/tree/itreecursor-interface#value-propertysignature"
},
"MethodSignature": {
"enterField": "/docs/apis/tree/itreecursor-interface#enterfield-methodsignature",
"enterNode": "/docs/apis/tree/itreecursor-interface#enternode-methodsignature",
"exitField": "/docs/apis/tree/itreecursor-interface#exitfield-methodsignature",
"exitNode": "/docs/apis/tree/itreecursor-interface#exitnode-methodsignature",
"firstField": "/docs/apis/tree/itreecursor-interface#firstfield-methodsignature",
"firstNode": "/docs/apis/tree/itreecursor-interface#firstnode-methodsignature",
"getFieldKey": "/docs/apis/tree/itreecursor-interface#getfieldkey-methodsignature",
"getFieldLength": "/docs/apis/tree/itreecursor-interface#getfieldlength-methodsignature",
"getFieldPath": "/docs/apis/tree/itreecursor-interface#getfieldpath-methodsignature",
"getPath": "/docs/apis/tree/itreecursor-interface#getpath-methodsignature",
"nextField": "/docs/apis/tree/itreecursor-interface#nextfield-methodsignature",
"nextNode": "/docs/apis/tree/itreecursor-interface#nextnode-methodsignature",
"seekNodes": "/docs/apis/tree/itreecursor-interface#seeknodes-methodsignature",
"skipPendingFields": "/docs/apis/tree/itreecursor-interface#skippendingfields-methodsignature"
}
},
"package": "@fluid-internal/tree",
"unscopedPackageName": "tree"
}

[//]: # "Do not edit this file. It is automatically generated by @fluidtools/api-markdown-documenter."

[Packages](/docs/apis/) &gt; [@fluid-internal/tree](/docs/apis/tree) &gt; [ITreeCursor](/docs/apis/tree/itreecursor-interface)

A stateful low-level interface for reading tree data.

## Signature {#itreecursor-signature}

```typescript
export interface ITreeCursor
```

## Properties

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Property
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#chunklength-propertysignature'>chunkLength</a>
      </td>
      <td>
        number
      </td>
      <td>
        <p>Length of current chunk. Since an entire chunk always has the same <code>pending</code> value, can be used to help skip over all of a pending chunk at once.</p><p>TODO: Add optional APIs to access underlying chunks so readers can accelerate processing of chunk formats they understand.</p><p>Only valid when <code>mode</code> is <code>Nodes</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#chunkstart-propertysignature'>chunkStart</a>
      </td>
      <td>
        number
      </td>
      <td>
        <p>Index (within its parent field) of the first node in the current chunk. Always less than or equal to <code>currentIndexInField</code>.</p><p>Only valid when <code>mode</code> is <code>Nodes</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#fieldindex-propertysignature'>fieldIndex</a>
      </td>
      <td>
        number
      </td>
      <td>
        <p>Index (within its parent field) of the current node.</p><p>Only valid when <code>mode</code> is <code>Nodes</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#mode-propertysignature'>mode</a>
      </td>
      <td>
        <a href='/docs/apis/tree#cursorlocationtype-enum'>CursorLocationType</a>
      </td>
      <td>
        What kind of place the cursor is at. Determines which operations are allowed.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#pending-propertysignature'>pending</a>
      </td>
      <td>
        boolean
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#type-propertysignature'>type</a>
      </td>
      <td>
        <a href='/docs/apis/tree#treetype-typealias'>TreeType</a>
      </td>
      <td>
        <p>The type of the currently selected node.</p><p>Only valid when <code>mode</code> is <code>Nodes</code>, and not <code>pending</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#value-propertysignature'>value</a>
      </td>
      <td>
        <a href='/docs/apis/tree#value-typealias'>Value</a>
      </td>
      <td>
        <p>The value associated with the currently selected node.</p><p>Only valid when <code>mode</code> is <code>Nodes</code>, and not <code>pending</code>.</p>
      </td>
    </tr>
  </tbody>
</table>

## Methods

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Method
      </th>
      <th scope="col">
        Return Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#enterfield-methodsignature'>enterField</a>
      </td>
      <td>
        void
      </td>
      <td>
        <p>Navigate to the field with the specified <code>key</code> and set the mode to <code>Fields</code>.</p><p>Only valid when <code>mode</code> is <code>Nodes</code>, and not <code>pending</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#enternode-methodsignature'>enterNode</a>
      </td>
      <td>
        void
      </td>
      <td>
        <p>Sets current node to the node at the provided <code>index</code> of the current field.</p><p>Allowed when <code>mode</code> is <code>Fields</code>, and not <code>pending</code>. Sets mode to <code>Nodes</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#exitfield-methodsignature'>exitField</a>
      </td>
      <td>
        void
      </td>
      <td>
        <p>Navigate up to parent node. Sets mode to <code>Nodes</code></p><p>Only valid when <code>mode</code> is <code>Fields</code>.</p><p>TODO: what to do if at root?</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#exitnode-methodsignature'>exitNode</a>
      </td>
      <td>
        void
      </td>
      <td>
        <p>Navigate up to parent field. Sets mode to <code>Fields</code></p><p>Same as seek Number.POSITIVE_INFINITY, but only valid when <code>mode</code> is <code>Nodes</code>.</p><p>TODO: what to do if at root? TODO: Maybe merge with upToNode to make a single "Up"?</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#firstfield-methodsignature'>firstField</a>
      </td>
      <td>
        boolean
      </td>
      <td>
        <p>Enters the first non-empty field (setting mode to <code>Fields</code>) so fields can be iterated with <code>nextField</code> and <code>skipPendingFields</code>.</p><p>If there are no fields, mode is returned to <code>Nodes</code> and false is returned.</p><p>Allowed when <code>mode</code> is <code>Nodes</code> and not <code>pending</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#firstnode-methodsignature'>firstNode</a>
      </td>
      <td>
        boolean
      </td>
      <td>
        <p>Moves to the first node of the selected field, setting mode to <code>Nodes</code>.</p><p>If field is empty, returns false instead.</p><p>Allowed when <code>mode</code> is <code>Fields</code>, and not <code>pending</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#getfieldkey-methodsignature'>getFieldKey</a>
      </td>
      <td>
        <a href='/docs/apis/tree#fieldkey-typealias'>FieldKey</a>
      </td>
      <td>
        <p>Returns the FieldKey for the current field.</p><p>Allowed when <code>mode</code> is <code>Fields</code>, and not <code>pending</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#getfieldlength-methodsignature'>getFieldLength</a>
      </td>
      <td>
        number
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#getfieldpath-methodsignature'>getFieldPath</a>
      </td>
      <td>
        <a href='/docs/apis/tree/fielduppath-interface'>FieldUpPath</a>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#getpath-methodsignature'>getPath</a>
      </td>
      <td>
        <a href='/docs/apis/tree/uppath-interface'>UpPath</a> | undefined
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#nextfield-methodsignature'>nextField</a>
      </td>
      <td>
        boolean
      </td>
      <td>
        <p>Moves the "current field" forward one in an arbitrary field traversal order, skipping any empty fields.</p><p>If there is no remaining field to iterate to, returns false and navigates up to the parent setting the mode to <code>Nodes</code>.</p><p>Order of fields is only guaranteed to be consistent thorough a single iteration.</p><p>If skipPending, skip past fields which are currently pending. This can be used to skip to the end of a large number of consecutive pending fields.</p><p>Allowed when <code>mode</code> is <code>Fields</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#nextnode-methodsignature'>nextNode</a>
      </td>
      <td>
        boolean
      </td>
      <td>
        The same as <code>seekNodes(1)</code>, but might be faster.
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#seeknodes-methodsignature'>seekNodes</a>
      </td>
      <td>
        boolean
      </td>
      <td>
        <p>Moves <code>offset</code> nodes in the field. If seeking to exactly past either end, returns false and navigates up to the parent field (setting mode to <code>Fields</code>).</p><p>Allowed if mode is <code>Nodes</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        <a href='/docs/apis/tree/itreecursor-interface#skippendingfields-methodsignature'>skipPendingFields</a>
      </td>
      <td>
        boolean
      </td>
      <td>
        <p>Moves the "current field" forward until <code>pending</code> is <code>false</code>.</p><p>If there are no remaining field to iterate to, returns false and navigates up to the parent setting the mode to <code>Nodes</code>.</p><p>Order of fields is only guaranteed to be consistent thorough a single iteration.</p><p>Allowed when <code>mode</code> is <code>Fields</code>.</p>
      </td>
    </tr>
  </tbody>
</table>

## Property Details

### chunkLength {#chunklength-propertysignature}

Length of current chunk. Since an entire chunk always has the same `pending` value, can be used to help skip over all of a pending chunk at once.

TODO: Add optional APIs to access underlying chunks so readers can accelerate processing of chunk formats they understand.

Only valid when `mode` is `Nodes`<!-- -->.

#### Signature {#chunklength-signature}

```typescript
readonly chunkLength: number;
```

### chunkStart {#chunkstart-propertysignature}

Index (within its parent field) of the first node in the current chunk. Always less than or equal to `currentIndexInField`<!-- -->.

Only valid when `mode` is `Nodes`<!-- -->.

#### Signature {#chunkstart-signature}

```typescript
readonly chunkStart: number;
```

### fieldIndex {#fieldindex-propertysignature}

Index (within its parent field) of the current node.

Only valid when `mode` is `Nodes`<!-- -->.

#### Signature {#fieldindex-signature}

```typescript
readonly fieldIndex: number;
```

### mode {#mode-propertysignature}

What kind of place the cursor is at. Determines which operations are allowed.

#### Signature {#mode-signature}

```typescript
readonly mode: CursorLocationType;
```

### pending {#pending-propertysignature}

#### Signature {#pending-signature}

```typescript
readonly pending: boolean;
```

### type {#type-propertysignature}

The type of the currently selected node.

Only valid when `mode` is `Nodes`<!-- -->, and not `pending`<!-- -->.

#### Signature {#type-signature}

```typescript
readonly type: TreeType;
```

### value {#value-propertysignature}

The value associated with the currently selected node.

Only valid when `mode` is `Nodes`<!-- -->, and not `pending`<!-- -->.

#### Signature {#value-signature}

```typescript
readonly value: Value;
```

## Method Details

### enterField {#enterfield-methodsignature}

Navigate to the field with the specified `key` and set the mode to `Fields`<!-- -->.

Only valid when `mode` is `Nodes`<!-- -->, and not `pending`<!-- -->.

#### Signature {#enterfield-signature}

```typescript
enterField(key: FieldKey): void;
```

#### Parameters {#enterfield-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        key
      </td>
      <td>
        <a href='/docs/apis/tree#fieldkey-typealias'>FieldKey</a>
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### enterNode {#enternode-methodsignature}

Sets current node to the node at the provided `index` of the current field.

Allowed when `mode` is `Fields`<!-- -->, and not `pending`<!-- -->. Sets mode to `Nodes`<!-- -->.

#### Signature {#enternode-signature}

```typescript
enterNode(childIndex: number): void;
```

#### Parameters {#enternode-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        childIndex
      </td>
      <td>
        number
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

### exitField {#exitfield-methodsignature}

Navigate up to parent node. Sets mode to `Nodes`

Only valid when `mode` is `Fields`<!-- -->.

TODO: what to do if at root?

#### Signature {#exitfield-signature}

```typescript
exitField(): void;
```

### exitNode {#exitnode-methodsignature}

Navigate up to parent field. Sets mode to `Fields`

Same as seek Number.POSITIVE_INFINITY, but only valid when `mode` is `Nodes`<!-- -->.

TODO: what to do if at root? TODO: Maybe merge with upToNode to make a single "Up"?

#### Signature {#exitnode-signature}

```typescript
exitNode(): void;
```

### firstField {#firstfield-methodsignature}

Enters the first non-empty field (setting mode to `Fields`<!-- -->) so fields can be iterated with `nextField` and `skipPendingFields`<!-- -->.

If there are no fields, mode is returned to `Nodes` and false is returned.

Allowed when `mode` is `Nodes` and not `pending`<!-- -->.

#### Signature {#firstfield-signature}

```typescript
firstField(): boolean;
```

#### Returns {#firstfield-returns}

<b>Return type:</b> boolean

### firstNode {#firstnode-methodsignature}

Moves to the first node of the selected field, setting mode to `Nodes`<!-- -->.

If field is empty, returns false instead.

Allowed when `mode` is `Fields`<!-- -->, and not `pending`<!-- -->.

#### Signature {#firstnode-signature}

```typescript
firstNode(): boolean;
```

#### Returns {#firstnode-returns}

<b>Return type:</b> boolean

### getFieldKey {#getfieldkey-methodsignature}

Returns the FieldKey for the current field.

Allowed when `mode` is `Fields`<!-- -->, and not `pending`<!-- -->.

#### Signature {#getfieldkey-signature}

```typescript
getFieldKey(): FieldKey;
```

#### Returns {#getfieldkey-returns}

<b>Return type:</b> [FieldKey](/docs/apis/tree#fieldkey-typealias)

### getFieldLength {#getfieldlength-methodsignature}

#### Signature {#getfieldlength-signature}

```typescript
getFieldLength(): number;
```

#### Returns {#getfieldlength-returns}

the number of immediate children in the current field.

Allowed when `mode` is `Fields`<!-- -->, and not `pending`<!-- -->.

<b>Return type:</b> number

### getFieldPath {#getfieldpath-methodsignature}

#### Signature {#getfieldpath-signature}

```typescript
getFieldPath(): FieldUpPath;
```

#### Returns {#getfieldpath-returns}

a path to the current field. See [FieldUpPath](/docs/apis/tree/fielduppath-interface)<!-- -->.

Only valid when `mode` is `Fields`<!-- -->. Assumes this cursor has a root node where its field keys are actually detached sequences. If the cursor is not rooted at such a node, calling this function is invalid, and the returned FieldUpPath (if any) may not be meaningful. This requirement exists because [FieldUpPath](/docs/apis/tree/fielduppath-interface)<!-- -->s are absolute paths and thus must be rooted in a detached sequence. TODO: consider adding an optional base path to append to remove/clarify this restriction.

<b>Return type:</b> [FieldUpPath](/docs/apis/tree/fielduppath-interface)

### getPath {#getpath-methodsignature}

#### Signature {#getpath-signature}

```typescript
getPath(): UpPath | undefined;
```

#### Returns {#getpath-returns}

a path to the current node. See [UpPath](/docs/apis/tree/uppath-interface)<!-- -->.

Only valid when `mode` is `Nodes`<!-- -->. Assumes this cursor has a root node where its field keys are actually detached sequences. If the cursor is not rooted at such a node, calling this function is invalid, and the returned UpPath (if any) may not be meaningful. This requirement exists because [UpPath](/docs/apis/tree/uppath-interface)<!-- -->s are absolute paths and thus must be rooted in a detached sequence. TODO: consider adding an optional base path to append to remove/clarify this restriction.

<b>Return type:</b> [UpPath](/docs/apis/tree/uppath-interface) \| undefined

### nextField {#nextfield-methodsignature}

Moves the "current field" forward one in an arbitrary field traversal order, skipping any empty fields.

If there is no remaining field to iterate to, returns false and navigates up to the parent setting the mode to `Nodes`<!-- -->.

Order of fields is only guaranteed to be consistent thorough a single iteration.

If skipPending, skip past fields which are currently pending. This can be used to skip to the end of a large number of consecutive pending fields.

Allowed when `mode` is `Fields`<!-- -->.

#### Signature {#nextfield-signature}

```typescript
nextField(): boolean;
```

#### Returns {#nextfield-returns}

<b>Return type:</b> boolean

### nextNode {#nextnode-methodsignature}

The same as `seekNodes(1)`<!-- -->, but might be faster.

#### Signature {#nextnode-signature}

```typescript
nextNode(): boolean;
```

#### Returns {#nextnode-returns}

<b>Return type:</b> boolean

### seekNodes {#seeknodes-methodsignature}

Moves `offset` nodes in the field. If seeking to exactly past either end, returns false and navigates up to the parent field (setting mode to `Fields`<!-- -->).

Allowed if mode is `Nodes`<!-- -->.

#### Signature {#seeknodes-signature}

```typescript
seekNodes(offset: number): boolean;
```

#### Parameters {#seeknodes-parameters}

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">
        Parameter
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col">
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        offset
      </td>
      <td>
        number
      </td>
      <td>
      </td>
    </tr>
  </tbody>
</table>

#### Returns {#seeknodes-returns}

<b>Return type:</b> boolean

### skipPendingFields {#skippendingfields-methodsignature}

Moves the "current field" forward until `pending` is `false`<!-- -->.

If there are no remaining field to iterate to, returns false and navigates up to the parent setting the mode to `Nodes`<!-- -->.

Order of fields is only guaranteed to be consistent thorough a single iteration.

Allowed when `mode` is `Fields`<!-- -->.

#### Signature {#skippendingfields-signature}

```typescript
skipPendingFields(): boolean;
```

#### Returns {#skippendingfields-returns}

<b>Return type:</b> boolean
