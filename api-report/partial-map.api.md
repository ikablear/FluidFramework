## API Report File for "@fluidframework/partial-map"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { IChannelAttributes } from '@fluidframework/datastore-definitions';
import { IChannelFactory } from '@fluidframework/datastore-definitions';
import { IChannelServices } from '@fluidframework/datastore-definitions';
import { IChannelStorageService } from '@fluidframework/datastore-definitions';
import { IFluidDataStoreRuntime } from '@fluidframework/datastore-definitions';
import { IFluidSerializer } from '@fluidframework/shared-object-base';
import { IGarbageCollectionData } from '@fluidframework/runtime-definitions';
import { ISequencedDocumentMessage } from '@fluidframework/protocol-definitions';
import { ISerializedHandle } from '@fluidframework/shared-object-base';
import { ISharedObjectEvents } from '@fluidframework/shared-object-base';
import { ISummaryTreeWithStats } from '@fluidframework/runtime-definitions';
import { ITelemetryContext } from '@fluidframework/runtime-definitions';
import { Serializable } from '@fluidframework/datastore-definitions';
import { SharedObject } from '@fluidframework/shared-object-base';

// @public (undocumented)
export interface ClearOp {
    // (undocumented)
    type: OpType.Clear;
}

// @public (undocumented)
export interface CompactionOp {
    // (undocumented)
    persistedState: ISharedPartialMapSummary<ISerializedHandle>;
    // (undocumented)
    refSequenceNumber: number;
    // (undocumented)
    type: OpType.Compact;
}

// @public (undocumented)
export interface DeleteOp {
    // (undocumented)
    key: string;
    // (undocumented)
    type: OpType.Delete;
}

// @public (undocumented)
export type GCWhiteList = string[];

// @public (undocumented)
export interface IBtreeInteriorNode<THandle> {
    // (undocumented)
    readonly children: readonly THandle[];
    // (undocumented)
    readonly keys: readonly string[];
}

// @public (undocumented)
export interface IBtreeLeafNode {
    // (undocumented)
    readonly keys: readonly string[];
    // (undocumented)
    readonly values: readonly any[];
}

// @public
export interface IChunkedBTree<T, THandle> {
    // (undocumented)
    evict(evictionCountHint: number): any;
    // (undocumented)
    flush(updates: Map<string, T>, deletes: Set<string>): Promise<ISerializedBtree<THandle>>;
    // (undocumented)
    flushSync(updates: Map<string, T>, deletes: Set<string>): ISerializedBtree<IBtreeLeafNode>;
    // (undocumented)
    get(key: string): Promise<T | undefined>;
    // (undocumented)
    has(key: string): Promise<boolean>;
    // (undocumented)
    workingSetSize(): number;
}

// @public (undocumented)
export interface ISerializedBtree<THandle> {
    // (undocumented)
    readonly order: number;
    // (undocumented)
    readonly root: THandle;
}

// @public
export interface ISharedPartialMapEvents extends ISharedObjectEvents {
    (event: SharedPartialMapEvents.ValueChanged, listener: (changed: string, local: boolean) => void): any;
    (event: SharedPartialMapEvents.Clear, listener: (local: boolean) => void): any;
    (event: SharedPartialMapEvents.StartFlush, listener: () => void): any;
    (event: SharedPartialMapEvents.Flush, listener: (isLeader: boolean) => void): any;
}

// @public (undocumented)
export interface ISharedPartialMapSummary<THandle> {
    // (undocumented)
    readonly gcWhiteList: GCWhiteList;
    // (undocumented)
    readonly root: ISerializedBtree<THandle>;
}

// @public
export interface IValueChanged {
    key: string;
}

// @public (undocumented)
export enum OpType {
    // (undocumented)
    Clear = 2,
    // (undocumented)
    Compact = 3,
    // (undocumented)
    Delete = 1,
    // (undocumented)
    Set = 0
}

// @public @sealed
export class PartialMapFactory implements IChannelFactory {
    // (undocumented)
    static readonly Attributes: IChannelAttributes;
    // (undocumented)
    get attributes(): IChannelAttributes;
    // (undocumented)
    create(runtime: IFluidDataStoreRuntime, id: string): SharedPartialMap;
    // (undocumented)
    load(runtime: IFluidDataStoreRuntime, id: string, services: IChannelServices, attributes: IChannelAttributes): Promise<SharedPartialMap>;
    // (undocumented)
    static readonly Type = "https://graph.microsoft.com/types/partial-map";
    // (undocumented)
    get type(): string;
}

// @public (undocumented)
export type PartialMapOp = SetOp | DeleteOp | ClearOp | CompactionOp;

// @public (undocumented)
export interface SetOp {
    // (undocumented)
    key: string;
    // (undocumented)
    type: OpType.Set;
    // (undocumented)
    value: any;
}

// @public (undocumented)
export class SharedPartialMap extends SharedObject<ISharedPartialMapEvents> {
    readonly [Symbol.toStringTag]: string;
    constructor(id: string, runtime: IFluidDataStoreRuntime, attributes: IChannelAttributes);
    // @internal (undocumented)
    protected applyStashedOp(content: any): unknown;
    clear(): void;
    static create(runtime: IFluidDataStoreRuntime, id?: string): SharedPartialMap;
    delete(key: string): void;
    get<T = Serializable>(key: string): Promise<T | undefined>;
    // (undocumented)
    getAttachSummary(fullTree?: boolean | undefined, trackState?: boolean | undefined, telemetryContext?: ITelemetryContext | undefined): ISummaryTreeWithStats;
    static getFactory(): IChannelFactory;
    // (undocumented)
    getGCData(fullGC?: boolean | undefined): IGarbageCollectionData;
    has(key: string): Promise<boolean>;
    // @internal (undocumented)
    protected loadCore(storage: IChannelStorageService): Promise<void>;
    // @internal (undocumented)
    protected onDisconnect(): void;
    // (undocumented)
    pendingFlushCompleted(): Promise<boolean>;
    // @internal (undocumented)
    protected processCore(message: ISequencedDocumentMessage, local: boolean, localOpMetadata: unknown): void;
    set(key: string, value: any): this;
    // (undocumented)
    setCacheSizeHint(cacheSizeHint: number): void;
    // (undocumented)
    setFlushThreshold(modificationCount: number): void;
    // (undocumented)
    get storageBtreeOrder(): number;
    // (undocumented)
    summarize(fullTree?: boolean | undefined, trackState?: boolean | undefined, telemetryContext?: ITelemetryContext | undefined): Promise<ISummaryTreeWithStats>;
    // @internal (undocumented)
    protected summarizeCore(serializer: IFluidSerializer, telemetryContext?: ITelemetryContext): ISummaryTreeWithStats;
    workingSetSize(): number;
}

// @public (undocumented)
export enum SharedPartialMapEvents {
    // (undocumented)
    Clear = "clear",
    // (undocumented)
    Flush = "flush",
    // (undocumented)
    StartFlush = "startFlush",
    // (undocumented)
    ValueChanged = "valueChanged"
}

```
